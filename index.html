<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="bezier.js"></script>
    <title>Neon Night</title>
</head>

<body>
    <section id="title">
        <div class="center">
            <a href="#">
                <header title="Neon Night">
                    <h1 id="neon-night" class="neon-pink-ambient" style="font-style: italic; font-size: 5rem;">Neon Night</h1>
                </header>
            </a>
        </div>

        <div class="center">
            <button class="neon-pink-ambient">
                Button here for no reason
            </button>
        </div>
    </section>
    <div class="center">
        <h2>
            Welcome to <span class="neon-blue">another</span> generic looking website of a random dude.
        </h2>
    </div>
    <p class="general-text">
        You expected some cool and feature rich high end website? I lied, I don't have any library here. Take off your
        shoes, we're gonna talk about <b class="neon-blue">responsive and optimal design</b>.
    </p>

    <div class="center"><h3 class="neon-green">Things to keep in mind</h2></div>
    <div class="galleryContainer">
        <div class="gallery-left">&lt;</div>
        <div class="gallery-right">&gt;</div>
        <div class="gallery" id="gallery1">
            <div class="gallery-item">
                <p>
                    1. I don't turn the site into a <span class="neon-red">DIV</span> hell. Document object accessing will be faster if there are not too much elements to interact with. A website with 20 levels of divs that end up displaying one button lags because of this, not a ton of unnecesarry content
                </p>
            </div>
            <div class="gallery-item">
                <p>
                    2. Optimal vanilla js code is always better than fancy library like jQuery. Who told that libraries are most optimal code for your site? Of course they are if developer has <span class="neon-red">a skill issue</span>
                </p>
            </div>
            <div class="gallery-item">
                <p>
                    3. Reducing size only reduces load time of website and it has nothing to do with <span class="neon-red">performance</span>. If it takes too long add placeholders, for the love of god. Users are not THAT impatient to be unable to wait one extra second
                </p>
            </div>
            <div class="gallery-item">
                <p>
                    4. Presume that user is on mobile, however this is a very niche topic to discuss. But it is always better to keep in mind that user's phone is a potato.<br>Adding 999+ <span class="neon-red">polyfills</span> may only help one guy with pc from back 90's
                </p>
            </div>
        </div>
    </div>
    <script>
        let galleryRoot = document.getElementById("gallery1");
        let child = document.querySelector(".gallery-item")
        let currentElem = 0;
        let itemStyle = window.getComputedStyle(child)
        let itemWidth = parseFloat(itemStyle.width) + parseFloat(itemStyle.paddingLeft) + parseFloat(itemStyle.paddingRight) + parseFloat(itemStyle.marginLeft) + parseFloat(itemStyle.marginRight)

        function scrollGallery(offset) {
            galleryRoot.scrollLeft = offset;
        }

        let galleryRight = document.querySelector(".gallery-right")
        let galleryLeft = document.querySelector(".gallery-left")

        galleryRight.classList.add("hoverable")

        let easein = bezier(0.42, 0, 0, 1);
        let shiftState = 0;

        function shiftNext(p) {
            galleryRoot.scrollLeft = itemWidth*(shiftState + p);
        }

        function shiftPrev(p) {
            galleryRoot.scrollLeft = itemWidth*(shiftState - p);
        }

        galleryLeft.addEventListener("click", function(event) {
            shiftState = currentElem;
            animate(shiftPrev, 400, easein);
            
            //scrollGallery(galleryRoot.scrollLeft - itemWidth)
        });

        galleryRight.addEventListener("click", function(event) {
            shiftState = currentElem
            animate(shiftNext, 400, easein);

            //scrollGallery(galleryRoot.scrollLeft + itemWidth)
        });

        let lastKnownScrollPosition = 0;
        let ticking = false;

        galleryRoot.addEventListener("scroll", (event) => {
            lastKnownScrollPosition = galleryRoot.scrollLeft;

            if (!ticking) {
                window.requestAnimationFrame(() => {
                    galleryScrollHadler(lastKnownScrollPosition);
                    ticking = false;
                });

                ticking = true;
            }
        });

        function galleryScrollHadler(scrollPos) {
            currentElem = Math.round(scrollPos / itemWidth);

            if (currentElem === 0) galleryLeft.classList.remove("hoverable")
            else if (currentElem === galleryRoot.children.length - 1) galleryRight.classList.remove("hoverable")
            else galleryLeft.classList.add("hoverable"), galleryRight.classList.add("hoverable")
        }

        scrollGallery(0);

    </script>

    <p class="general-text">
        Made by Aziz Hakberdiev to demonstrate use of CSS properties to create effects of neon glowing. JavaScript code was used for custom implementation of CSS transitions without any libraries and was optimized.<br>
        Contacts: <a href="https://t.me/azizhakberdiev">t.me/azizhakberdiev</a><br>
        Phone: +998 (93) 663-41-71<br>
    </p>

    <script>
        let neonNight = document.getElementById("neon-night");
        setInterval(() => neonNight.classList.toggle("neon-pink-ambient"), 1400);
    </script>

    <div class="footer"></div>
</body>

</html>